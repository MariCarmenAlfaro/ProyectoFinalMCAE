

<div class="col-12 my-3">
    <p-button label="Registrar usuario" (click)="this.showCreateForm()"></p-button>
</div>




<ng-container *ngIf="users">
    <p-table
    #dt1
    [value]="users"
    dataKey="id"
    [rows]="10"
    [showCurrentPageReport]="true"
    [rowsPerPageOptions]="[10, 25, 50]"
    currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
    [globalFilterFields]="['userName', 'emailAddress', 'userType']"
>
    <ng-template pTemplate="caption">
        <div class="flex">
            <button pButton label="Clear" class="p-button-outlined" icon="pi pi-filter-slash" (click)="clear(dt1)"></button>
           
        </div>
    </ng-template>
    <ng-template pTemplate="header">
        <tr>
            <th style="min-width:15rem">
                <div class="flex align-items-center">
                    Nombre
                    <p-columnFilter type="text" field="userName" display="menu"></p-columnFilter>
                </div>
            </th>
            <th style="min-width:15rem">
                <div class="flex align-items-center">
                    Correo electronico
                    <p-columnFilter type="text" field="emailAddress" display="menu"></p-columnFilter>
                </div>
            </th>
            <th style="min-width:15rem">
                <div class="flex align-items-center">
                    Tipo
                    <p-columnFilter type="text" field="userType" display="menu"></p-columnFilter>
                </div>
            </th>
    
            <th style="width: 3rem">
                <div class="flex align-items-center">
                     EDIT
                </div>
            </th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-user>
        <tr>
            <td>
                {{ user.userName }}
            </td>
            <td>
        
                <span class="ml-1 vertical-align-middle">{{ user.emailAddress }}</span>
            </td>
            <td>

                <span class="ml-1 vertical-align-middle">{{ user.userType }}</span>
            </td>
            <td>
           Edit
            </td>
     
          
        </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage">
        <tr>
            <td colspan="7">No customers found.</td>
        </tr>
    </ng-template>
</p-table>
</ng-container>


<p-sidebar [(visible)]="showDialog">
    <ng-container *ngIf="showCreateUser">
        <p-button  (click)="generatePassword()">Generar contraseña</p-button>
        <div class="col-12">
            <form class="row g-3 f  romReserva" [formGroup]="form">
                <div class="modal-body">
                <div class="form-floating mb-2">
                    <input type="text" class="form-control" placeholder="Usuario" formControlName="userName">
                    <label for="userName">Nombre</label>
                </div>
               
                <div class="form-floating mb-2">
                    <p-dropdown formControlName="userType" [options]="userTypes" optionLabel="name" placeholder="Tipo usuario"></p-dropdown>
                </div>
                <div class="form-floating mb-2">
                    
                    <input type="date" class="form-control" placeholder="Fecha registro" formControlName="registrationDate">
                    <label for="registrationDate">Fecha registro</label>
                </div>
                <div class="form-floating mb-2">
                    <input type="text" class="form-control" placeholder="Correo" formControlName="emailAddress">
                    <label for="emailAddress">Correo</label>
                </div>
        
                <div class="form-floating mb-2">
                    <input type="password" class="form-control" placeholder="Contraseña" formControlName="psswdUser">
                    <label for="psswdUser">Contraseña</label>
                </div>

                </div>
        

                <div class="modal-footer">
                <button type="submit" class="btn btn-primary " (click)="this.showDialog = false">Cerrar</button>
        
                <button type="submit" class="btn btn-primary guardarLogin" (click)="postNewUser()">Guardar</button>
        
                </div>
            </form>
        </div>
    </ng-container>

    <ng-container *ngIf="showAddHorseToUser">
        <div class="col-12">
            <p>Crear caballo privado</p>
            <form class="row g-3 f  romReserva" [formGroup]="formHorseOwner">
                <div class="modal-body">
                  <div class="form-floating mb-2">
                    <input type="text" class="form-control" placeholder="Nombre" formControlName="horseName">
                    <label for="horseName">Nombre</label>
                  </div>
                  <div class="form-floating mb-2">
                    <input type="text" class="form-control" placeholder="Barrera" formControlName="barnNum">
                    <label for="barnNum">Barrera</label>
                  </div>
                  <div class="form-floating mb-2">
                    <input type="text" class="form-control" placeholder="Camara" formControlName="cameraUrl">
                    <label for="cameraUrl">Camara</label>
                  </div>
                  <div class="form-floating mb-2">
                    <p-dropdown formControlName="foodType" [options]="foodHorseTypes" optionLabel="name" optionValue="name" placeholder="Comida"></p-dropdown>
                  </div>
    
                  <div class="form-floating mb-2">
                    <input type="text" class="form-control" placeholder="Observaciones" formControlName="observation">
                    <label for="observation">Observaciones</label>
                  </div>
                     <div class="form-floating mb-2">
                        <input type="date" class="form-control"  placeholder="Fecha registro"
                          formControlName="registrationDate" >
                        <label for="registrationDate">Fecha registro</label>
                      </div>

                </div>
    

                <div class="modal-footer">
                  <button type="submit" class="btn btn-primary guardarLogin" (click)="savePrivateHorse()">Guardar</button>
    
                </div>
              </form>
        </div>
    </ng-container>

    <ng-container *ngIf="showPaymentForm">
      
        <div class="col-12">
            <p>Nuevo pago</p>
            <form class="row g-3 f  romReserva" [formGroup]="paymentForm">
                <div class="modal-body">
                <div class="form-floating mb-2">
                    <input type="date" class="form-control" placeholder="Fecha de pago" formControlName="payDate">
                    <label for="payDate">Fecha de pago</label>
                </div>
               
                <div class="form-floating mb-2">
                    <p-dropdown formControlName="priceId" [options]="typeServices" optionLabel="typeService" optionValue="priceId" placeholder="Tipo servicio"></p-dropdown>
                </div>
                <div class="form-floating mb-2">
                    <p-dropdown formControlName="payMethod" [options]="payMethods" optionLabel="name" optionValue="name" placeholder="Metodo de pago"></p-dropdown>
                    
                </div>
                <div class="form-floating mb-2">
                    <p-checkbox formControlName="isPaid" value="Pagado" inputId="isPaid" [binary]="true"></p-checkbox>
                    <label for="isPaid">Pagado</label>
                </div>
        
               

                </div>
        

                <div class="modal-footer">
               
        
                <button type="submit" class="btn btn-primary guardarLogin" (click)="savePayment()">Guardar</button>
        
                </div>
            </form>
        </div>
    </ng-container>
    <!-- <p *ngIf="messageCreation">USUARIO REGISTRADO</p>
    <p *ngIf="!messageCreation">Oops, ha habido algun error en el registro.</p>     -->
    </p-sidebar>
